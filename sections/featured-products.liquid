{% assign latest_products = collections.all.products | sort: 'created_at' | reverse | uniq | slice: 0, 3 %}
{% assign content = section.settings %}

<div class="container mx-auto py-20">
  <div>
    <div class="flex justify-between items-center mb-20">
      <h3 class="text-4xl font-medium mb-0">{{ content.section_title }}</h3>
      <a href="{{ routes.all_products_collection_url }}" class="block px-7 py-3 bg-anarvin uppercase text-white font-medium text-sm leading-snug hover:bg-black focus:outline-none focus:ring-0 transition duration-150 ease-in-out">
        {{ content.button_text }}
      </a>
    </div>
    <div class="flex gap-4 mb-20">
      {% for product in latest_products %}
        <div>
          <div>
            <img
              src="{{ product.featured_image | img_url: 'large' }}"
              alt="{{ product.title }}"
              loading="lazy" />
          </div>
          <h2>{{ product.title }}</h2>
          <div>
            <span>{{ product.compare_at_price_max | money }}</span>
            <span>{{ product.compare_at_price_min | money }}</span>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Featured Products",
    "settings": [
      {
        "type": "text",
        "id": "section_title",
        "label": "Section Title",
        "default": "Latest Products"
      }, {
        "type": "text",
        "id": "button_text",
        "label": "Button Text",
        "default": "View All"
      }
    ],
    "presets": [
      {
        "name": "Featured Products"
      }
    ]
  }
{% endschema %}
